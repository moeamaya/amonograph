<div id="layout">
  <div class="sidebar">
    <a href="/" class="logo">amonograph</a>
    <div class="search">
      <form>
        &#8594;
        <input type="text"></input>
      </form>
    </div>
    <div class="options">
      <h3>View</h3>
      <ul>
        <li>Full</li>
      </ul>
    </div>
  </div>
  <div class="content">
    <div class="drawing">
      <%= form_for @drawing, :html => {:multipart => true} do |f| %>
        <%= f.label :title %><br>
        <%= f.text_field :title %><br>
        <%= f.file_field :drawing %><br><br>
        <%= f.submit %>
      <% end %>
      <div id="container">
      <% @gallery.each do |img| %>
        <div class="gallery">
          <%= link_to(img) do %>
            <%= image_tag img.drawing_url.to_s %>
            <h5><%= img.title %></h5>
          <% end %>
        </div>
      <% end %>
      </div>
    </div>
  </div>
</div>

<script>
  var container = document.querySelector('#container');

  new imagesLoaded( container, function(){
    var msnry = new Masonry( container, {
      // options
      itemSelector: '.gallery'
    });
  });

  // var ready = function() {
  //   var container = document.querySelector('#container');
  //   var msnry = new Masonry( container, {
  //     // options
  //     itemSelector: '.gallery'
  //   });
  // }

  // // run masonry when images are loaded
  // $(document).ready(ready);
  // $(window).load(ready);
  // $(document).on('window:load', ready);
</script>


